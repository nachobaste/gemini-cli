(()=>{var e={};e.id=40,e.ids=[40],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},8359:()=>{},3739:()=>{},2756:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>d,originalPathname:()=>p,pages:()=>u,routeModule:()=>m,tree:()=>l}),r(793),r(9862),r(5663),r(6185);var i=r(3826),s=r(9930),o=r(2049),n=r.n(o),a=r(8405),c={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>a[e]);r.d(t,c);let l=["",{children:["projects",{children:["[id]",{children:["bmc",{children:["edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,793)),"/Users/natxo/Documents/GitHub/gemini-cli/src/app/projects/[id]/bmc/edit/page.tsx"]}]},{}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,9862)),"/Users/natxo/Documents/GitHub/gemini-cli/src/app/layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,5663)),"/Users/natxo/Documents/GitHub/gemini-cli/src/app/error.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,6185)),"/Users/natxo/Documents/GitHub/gemini-cli/src/app/not-found.tsx"]}],u=["/Users/natxo/Documents/GitHub/gemini-cli/src/app/projects/[id]/bmc/edit/page.tsx"],p="/projects/[id]/bmc/edit/page",d={require:r,loadChunk:()=>Promise.resolve()},m=new i.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/projects/[id]/bmc/edit/page",pathname:"/projects/[id]/bmc/edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},511:(e,t,r)=>{Promise.resolve().then(r.bind(r,7824))},6808:(e,t,r)=>{"use strict";function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){var i,s;i=t,s=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(i))in e?Object.defineProperty(e,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[i]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var o,n=Object.defineProperty,a=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(u,{createBrowserSupabaseClient:()=>P,createClientComponentClient:()=>d,createMiddlewareClient:()=>x,createMiddlewareSupabaseClient:()=>E,createPagesBrowserClient:()=>m,createPagesServerClient:()=>g,createRouteHandlerClient:()=>k,createServerActionClient:()=>S,createServerComponentClient:()=>C,createServerSupabaseClient:()=>N}),e.exports=((e,t,r,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of c(t))l.call(e,s)||s===r||n(e,s,{get:()=>t[s],enumerable:!(i=a(t,s))||i.enumerable});return e})(n({},"__esModule",{value:!0}),u);var p=r(1831);function d({supabaseUrl:e="https://iemhwwufuffbwgrzusjt.supabase.co",supabaseKey:t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImllbWh3d3VmdWZmYndncnp1c2p0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExMjYxMzEsImV4cCI6MjA2NjcwMjEzMX0.bhG23WjRqUE7AS18n-wYKJ1_Hx-_cuDJu8okON1e5cs",options:r,cookieOptions:i,isSingleton:n=!0}={}){if(!e||!t)throw Error("either NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY env variables or supabaseUrl and supabaseKey are required!");let a=()=>{var o;return(0,p.createSupabaseClient)(e,t,s(s({},r),{},{global:s(s({},null==r?void 0:r.global),{},{headers:s(s({},null==(o=null==r?void 0:r.global)?void 0:o.headers),{},{"X-Client-Info":"@supabase/auth-helpers-nextjs@0.10.0"})}),auth:{storage:new p.BrowserCookieAuthStorageAdapter(i)}}))};return n?o??a():a()}var m=d,f=r(1831),h=r(8035),b=class extends f.CookieAuthStorageAdapter{constructor(e,t){super(t),this.context=e}getCookie(e){var t,r,i;return(0,h.splitCookiesString)((null==(r=null==(t=this.context.res)?void 0:t.getHeader("set-cookie"))?void 0:r.toString())??"").map(t=>(0,f.parseCookies)(t)[e]).find(e=>!!e)??(null==(i=this.context.req)?void 0:i.cookies[e])}setCookie(e,t){this._setCookie(e,t)}deleteCookie(e){this._setCookie(e,"",{maxAge:0})}_setCookie(e,t,r){var i;let o=(0,h.splitCookiesString)((null==(i=this.context.res.getHeader("set-cookie"))?void 0:i.toString())??"").filter(t=>!(e in(0,f.parseCookies)(t))),n=(0,f.serializeCookie)(e,t,s(s(s({},this.cookieOptions),r),{},{httpOnly:!1}));this.context.res.setHeader("set-cookie",[...o,n])}};function g(e,{supabaseUrl:t="https://iemhwwufuffbwgrzusjt.supabase.co",supabaseKey:r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImllbWh3d3VmdWZmYndncnp1c2p0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExMjYxMzEsImV4cCI6MjA2NjcwMjEzMX0.bhG23WjRqUE7AS18n-wYKJ1_Hx-_cuDJu8okON1e5cs",options:i,cookieOptions:o}={}){var n;if(!t||!r)throw Error("either NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY env variables or supabaseUrl and supabaseKey are required!");return(0,f.createSupabaseClient)(t,r,s(s({},i),{},{global:s(s({},null==i?void 0:i.global),{},{headers:s(s({},null==(n=null==i?void 0:i.global)?void 0:n.headers),{},{"X-Client-Info":"@supabase/auth-helpers-nextjs@0.10.0"})}),auth:{storage:new b(e,o)}}))}var y=r(1831),v=r(8035),j=class extends y.CookieAuthStorageAdapter{constructor(e,t){super(t),this.context=e}getCookie(e){var t;return(0,v.splitCookiesString)((null==(t=this.context.res.headers.get("set-cookie"))?void 0:t.toString())??"").map(t=>(0,y.parseCookies)(t)[e]).find(e=>!!e)||(0,y.parseCookies)(this.context.req.headers.get("cookie")??"")[e]}setCookie(e,t){this._setCookie(e,t)}deleteCookie(e){this._setCookie(e,"",{maxAge:0})}_setCookie(e,t,r){let i=(0,y.serializeCookie)(e,t,s(s(s({},this.cookieOptions),r),{},{httpOnly:!1}));this.context.res.headers&&this.context.res.headers.append("set-cookie",i)}};function x(e,{supabaseUrl:t="https://iemhwwufuffbwgrzusjt.supabase.co",supabaseKey:r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImllbWh3d3VmdWZmYndncnp1c2p0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExMjYxMzEsImV4cCI6MjA2NjcwMjEzMX0.bhG23WjRqUE7AS18n-wYKJ1_Hx-_cuDJu8okON1e5cs",options:i,cookieOptions:o}={}){var n;if(!t||!r)throw Error("either NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY env variables or supabaseUrl and supabaseKey are required!");return(0,y.createSupabaseClient)(t,r,s(s({},i),{},{global:s(s({},null==i?void 0:i.global),{},{headers:s(s({},null==(n=null==i?void 0:i.global)?void 0:n.headers),{},{"X-Client-Info":"@supabase/auth-helpers-nextjs@0.10.0"})}),auth:{storage:new j(e,o)}}))}var w=r(1831),_=class extends w.CookieAuthStorageAdapter{constructor(e,t){super(t),this.context=e,this.isServer=!0}getCookie(e){var t;return null==(t=this.context.cookies().get(e))?void 0:t.value}setCookie(e,t){}deleteCookie(e){}};function C(e,{supabaseUrl:t="https://iemhwwufuffbwgrzusjt.supabase.co",supabaseKey:r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImllbWh3d3VmdWZmYndncnp1c2p0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExMjYxMzEsImV4cCI6MjA2NjcwMjEzMX0.bhG23WjRqUE7AS18n-wYKJ1_Hx-_cuDJu8okON1e5cs",options:i,cookieOptions:o}={}){var n;if(!t||!r)throw Error("either NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY env variables or supabaseUrl and supabaseKey are required!");return(0,w.createSupabaseClient)(t,r,s(s({},i),{},{global:s(s({},null==i?void 0:i.global),{},{headers:s(s({},null==(n=null==i?void 0:i.global)?void 0:n.headers),{},{"X-Client-Info":"@supabase/auth-helpers-nextjs@0.10.0"})}),auth:{storage:new _(e,o)}}))}var O=r(1831),I=class extends O.CookieAuthStorageAdapter{constructor(e,t){super(t),this.context=e}getCookie(e){var t;return null==(t=this.context.cookies().get(e))?void 0:t.value}setCookie(e,t){this.context.cookies().set(e,t,this.cookieOptions)}deleteCookie(e){this.context.cookies().set(e,"",s(s({},this.cookieOptions),{},{maxAge:0}))}};function k(e,{supabaseUrl:t="https://iemhwwufuffbwgrzusjt.supabase.co",supabaseKey:r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImllbWh3d3VmdWZmYndncnp1c2p0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExMjYxMzEsImV4cCI6MjA2NjcwMjEzMX0.bhG23WjRqUE7AS18n-wYKJ1_Hx-_cuDJu8okON1e5cs",options:i,cookieOptions:o}={}){var n;if(!t||!r)throw Error("either NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY env variables or supabaseUrl and supabaseKey are required!");return(0,O.createSupabaseClient)(t,r,s(s({},i),{},{global:s(s({},null==i?void 0:i.global),{},{headers:s(s({},null==(n=null==i?void 0:i.global)?void 0:n.headers),{},{"X-Client-Info":"@supabase/auth-helpers-nextjs@0.10.0"})}),auth:{storage:new I(e,o)}}))}var S=k;function P({supabaseUrl:e="https://iemhwwufuffbwgrzusjt.supabase.co",supabaseKey:t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImllbWh3d3VmdWZmYndncnp1c2p0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExMjYxMzEsImV4cCI6MjA2NjcwMjEzMX0.bhG23WjRqUE7AS18n-wYKJ1_Hx-_cuDJu8okON1e5cs",options:r,cookieOptions:i}={}){return console.warn("Please utilize the `createPagesBrowserClient` function instead of the deprecated `createBrowserSupabaseClient` function. Learn more: https://supabase.com/docs/guides/auth/auth-helpers/nextjs-pages"),m({supabaseUrl:e,supabaseKey:t,options:r,cookieOptions:i})}function N(e,{supabaseUrl:t="https://iemhwwufuffbwgrzusjt.supabase.co",supabaseKey:r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImllbWh3d3VmdWZmYndncnp1c2p0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExMjYxMzEsImV4cCI6MjA2NjcwMjEzMX0.bhG23WjRqUE7AS18n-wYKJ1_Hx-_cuDJu8okON1e5cs",options:i,cookieOptions:s}={}){return console.warn("Please utilize the `createPagesServerClient` function instead of the deprecated `createServerSupabaseClient` function. Learn more: https://supabase.com/docs/guides/auth/auth-helpers/nextjs-pages"),g(e,{supabaseUrl:t,supabaseKey:r,options:i,cookieOptions:s})}function E(e,{supabaseUrl:t="https://iemhwwufuffbwgrzusjt.supabase.co",supabaseKey:r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImllbWh3d3VmdWZmYndncnp1c2p0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExMjYxMzEsImV4cCI6MjA2NjcwMjEzMX0.bhG23WjRqUE7AS18n-wYKJ1_Hx-_cuDJu8okON1e5cs",options:i,cookieOptions:s}={}){return console.warn("Please utilize the `createMiddlewareClient` function instead of the deprecated `createMiddlewareSupabaseClient` function. Learn more: https://supabase.com/docs/guides/auth/auth-helpers/nextjs#middleware"),x(e,{supabaseUrl:t,supabaseKey:r,options:i,cookieOptions:s})}},8035:e=>{"use strict";var t={decodeValues:!0,map:!1,silent:!1};function r(e){return"string"==typeof e&&!!e.trim()}function i(e,i){var s,o,n,a,c=e.split(";").filter(r),l=(s=c.shift(),o="",n="",(a=s.split("=")).length>1?(o=a.shift(),n=a.join("=")):n=s,{name:o,value:n}),u=l.name,p=l.value;i=i?Object.assign({},t,i):t;try{p=i.decodeValues?decodeURIComponent(p):p}catch(e){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+p+"'. Set options.decodeValues to false to disable this feature.",e)}var d={name:u,value:p};return c.forEach(function(e){var t=e.split("="),r=t.shift().trimLeft().toLowerCase(),i=t.join("=");"expires"===r?d.expires=new Date(i):"max-age"===r?d.maxAge=parseInt(i,10):"secure"===r?d.secure=!0:"httponly"===r?d.httpOnly=!0:"samesite"===r?d.sameSite=i:"partitioned"===r?d.partitioned=!0:d[r]=i}),d}function s(e,s){if(s=s?Object.assign({},t,s):t,!e)return s.map?{}:[];if(e.headers){if("function"==typeof e.headers.getSetCookie)e=e.headers.getSetCookie();else if(e.headers["set-cookie"])e=e.headers["set-cookie"];else{var o=e.headers[Object.keys(e.headers).find(function(e){return"set-cookie"===e.toLowerCase()})];o||!e.headers.cookie||s.silent||console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),e=o}}return(Array.isArray(e)||(e=[e]),s.map)?e.filter(r).reduce(function(e,t){var r=i(t,s);return e[r.name]=r,e},{}):e.filter(r).map(function(e){return i(e,s)})}e.exports=s,e.exports.parse=s,e.exports.parseString=i,e.exports.splitCookiesString=function(e){if(Array.isArray(e))return e;if("string"!=typeof e)return[];var t,r,i,s,o,n=[],a=0;function c(){for(;a<e.length&&/\s/.test(e.charAt(a));)a+=1;return a<e.length}for(;a<e.length;){for(t=a,o=!1;c();)if(","===(r=e.charAt(a))){for(i=a,a+=1,c(),s=a;a<e.length&&"="!==(r=e.charAt(a))&&";"!==r&&","!==r;)a+=1;a<e.length&&"="===e.charAt(a)?(o=!0,a=s,n.push(e.substring(t,i)),t=a):a=i+1}else a+=1;(!o||a>=e.length)&&n.push(e.substring(t,e.length))}return n}},7824:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var i=r(6808),s=r(1694),o=r(1324),n=r(7571),a=r(2166);let c=["id","created_at","updated_at","project_id"];function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){var i,s;i=t,s=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(i))in e?Object.defineProperty(e,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[i]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function p({params:e}){let{id:t}=e,r=(0,o.useRouter)(),l=(0,i.createClientComponentClient)(),{0:p,1:d}=(0,s.useState)({project_id:t}),{0:m,1:f}=(0,s.useState)([]),{0:h,1:b}=(0,s.useState)(!0),{0:g,1:y}=(0,s.useState)(null),v=e=>{let{name:t,value:r}=e.target;d(e=>u(u({},e),{},{[t]:r}))},j=async e=>{e.preventDefault(),b(!0),y(null);try{await n.k.upsertBMC(u(u({},p),{},{project_id:t}),l),r.push(`/projects/${t}`)}catch(e){console.error("Error saving BMC:",e),y("Failed to save Business Model Canvas."),b(!1)}};return h?a.jsx("div",{children:"Loading..."}):g?a.jsx("div",{className:"text-red-500",children:g}):(0,a.jsxs)("div",{className:"container-urbop py-12",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold",children:[p.id?"Edit":"Create"," Business Model Canvas"]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"template-select",className:"block text-sm font-medium text-gray-400 mr-2",children:"Apply Template:"}),(0,a.jsxs)("select",{id:"template-select",onChange:e=>{let t=e.target.value,r=m.find(e=>e.id===t);if(r){let{id:e,created_at:t,updated_at:i,project_id:s}=r,o=function(e,t){if(null==e)return{};var r,i,s=function(e,t){if(null==e)return{};var r,i,s={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(r,c);d(e=>u(u({},e),o))}},className:"bg-gray-800 text-white p-2 rounded-md focus:ring-2 focus:ring-lime-500",children:[a.jsx("option",{value:"",className:"text-white",children:"Select a template"}),m.map(e=>a.jsx("option",{value:e.id,className:"text-white",children:e.asset_class},e.id))]})]})]}),(0,a.jsxs)("form",{onSubmit:j,className:"space-y-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[a.jsx("label",{htmlFor:"key_partners",className:"block text-lg font-semibold mb-2",children:"Key Partners"}),a.jsx("textarea",{id:"key_partners",name:"key_partners",value:p.key_partners||"",onChange:v,rows:5,className:"w-full bg-gray-900 text-white p-3 rounded-md focus:ring-2 focus:ring-lime-500"})]}),(0,a.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[a.jsx("label",{htmlFor:"key_activities",className:"block text-lg font-semibold mb-2",children:"Key Activities"}),a.jsx("textarea",{id:"key_activities",name:"key_activities",value:p.key_activities||"",onChange:v,rows:5,className:"w-full bg-gray-900 text-white p-3 rounded-md focus:ring-2 focus:ring-lime-500"})]}),(0,a.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[a.jsx("label",{htmlFor:"key_resources",className:"block text-lg font-semibold mb-2",children:"Key Resources"}),a.jsx("textarea",{id:"key_resources",name:"key_resources",value:p.key_resources||"",onChange:v,rows:5,className:"w-full bg-gray-900 text-white p-3 rounded-md focus:ring-2 focus:ring-lime-500"})]})]}),(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[a.jsx("label",{htmlFor:"value_proposition",className:"block text-lg font-semibold mb-2",children:"Value Proposition"}),a.jsx("textarea",{id:"value_proposition",name:"value_proposition",value:p.value_proposition||"",onChange:v,rows:5,className:"w-full bg-gray-900 text-white p-3 rounded-md focus:ring-2 focus:ring-lime-500"})]}),(0,a.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[a.jsx("label",{htmlFor:"customer_relationships",className:"block text-lg font-semibold mb-2",children:"Customer Relationships"}),a.jsx("textarea",{id:"customer_relationships",name:"customer_relationships",value:p.customer_relationships||"",onChange:v,rows:5,className:"w-full bg-gray-900 text-white p-3 rounded-md focus:ring-2 focus:ring-lime-500"})]}),(0,a.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[a.jsx("label",{htmlFor:"channels",className:"block text-lg font-semibold mb-2",children:"Channels"}),a.jsx("textarea",{id:"channels",name:"channels",value:p.channels||"",onChange:v,rows:5,className:"w-full bg-gray-900 text-white p-3 rounded-md focus:ring-2 focus:ring-lime-500"})]})]}),a.jsx("div",{className:"space-y-8",children:(0,a.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[a.jsx("label",{htmlFor:"customer_segments",className:"block text-lg font-semibold mb-2",children:"Customer Segments"}),a.jsx("textarea",{id:"customer_segments",name:"customer_segments",value:p.customer_segments||"",onChange:v,rows:5,className:"w-full bg-gray-900 text-white p-3 rounded-md focus:ring-2 focus:ring-lime-500"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[a.jsx("label",{htmlFor:"cost_structure",className:"block text-lg font-semibold mb-2",children:"Cost Structure"}),a.jsx("textarea",{id:"cost_structure",name:"cost_structure",value:p.cost_structure||"",onChange:v,rows:5,className:"w-full bg-gray-900 text-white p-3 rounded-md focus:ring-2 focus:ring-lime-500"})]}),(0,a.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[a.jsx("label",{htmlFor:"revenue_streams",className:"block text-lg font-semibold mb-2",children:"Revenue Streams"}),a.jsx("textarea",{id:"revenue_streams",name:"revenue_streams",value:p.revenue_streams||"",onChange:v,rows:5,className:"w-full bg-gray-900 text-white p-3 rounded-md focus:ring-2 focus:ring-lime-500"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{type:"button",onClick:()=>r.back(),className:"btn btn-secondary",disabled:h,children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",disabled:h,children:h?"Saving...":"Save BMC"})]})]})]})}},7571:(e,t,r)=>{"use strict";function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){var i,s;i=t,s=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(i))in e?Object.defineProperty(e,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[i]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}r.d(t,{k:()=>a});let o=(0,r(7634).eI)("https://iemhwwufuffbwgrzusjt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImllbWh3d3VmdWZmYndncnp1c2p0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExMjYxMzEsImV4cCI6MjA2NjcwMjEzMX0.bhG23WjRqUE7AS18n-wYKJ1_Hx-_cuDJu8okON1e5cs"),n=e=>{if(e){if("string"==typeof e){let t=e.match(/\(([^,]+),([^)]+)\)/);if(t){let e=parseFloat(t[1]),r=parseFloat(t[2]);if(!isNaN(e)&&!isNaN(r))return{x:e,y:r}}}else if("object"==typeof e&&null!==e&&"number"==typeof e.x&&"number"==typeof e.y)return{x:e.x,y:e.y}}};class a{static async getProjects(e,t){let r=o.from("projects").select("*, mcda_evaluations(*, mcda_parameters(*))").order("created_at",{ascending:!1});e&&(r=r.eq("asset_class",e)),t&&(r=r.eq("development_category",t));let{data:i,error:c}=await r;if(c)throw c;return await Promise.all(i.map(async e=>{let t=await a.calculateMCDAScore(e.id);return console.log(`Project ${e.id} MCDA Score:`,t),s(s({},e),{},{coordinates:n(e.coordinates),mcda_score:t})}))}static async getProject(e){let{data:t,error:r}=await o.from("projects").select("*, mcda_evaluations(*, mcda_parameters(*)), business_model_canvas(*)").eq("id",e).single();if(r)throw r;return s(s({},t),{},{coordinates:n(t.coordinates)})}static async createProject(e){let{data:t,error:r}=await o.from("projects").insert(e).select().single();if(r)throw r;return t}static async updateProject(e,t){let{data:r,error:i}=await o.from("projects").update(t).eq("id",e).select().single();if(i)throw i;return r}static async deleteProject(e){let{error:t}=await o.from("projects").delete().eq("id",e);if(t)throw t}static async getMCDAParameters(){let{data:e,error:t}=await o.from("mcda_parameters").select("*").eq("is_active",!0).order("category",{ascending:!0}).order("name",{ascending:!0});if(t)throw t;return e}static async getMCDAParametersByCategory(){let{data:e,error:t}=await o.rpc("get_mcda_parameters_by_category");if(t)throw t;return e}static async updateMCDAParameters(e){let t=e.map(e=>({id:e.id,weight:e.weight})),{data:r,error:i}=await o.from("mcda_parameters").upsert(t,{onConflict:"id"}).select();if(i)throw i;return r}static async getProjectEvaluations(e){let{data:t,error:r}=await o.rpc("get_project_evaluations",{project_uuid:e});if(r)throw r;return t}static async upsertMCDAEvaluation(e){let{data:t,error:r}=await o.rpc("upsert_mcda_evaluation",{p_project_id:e.project_id,p_parameter_id:e.parameter_id,p_value:e.value,p_notes:e.notes});if(r)throw r;return t}static async calculateMCDAScore(e){let{data:t,error:r}=await o.rpc("calculate_mcda_score",{project_uuid:e});if(r)throw r;return t}static async getBMC(e){let{data:t,error:r}=await o.from("business_model_canvas").select("*").eq("project_id",e).single();if(r&&"PGRST116"!==r.code)throw r;return t}static async upsertBMC(e,t=o){let{data:r,error:i}=await t.from("business_model_canvas").upsert(e).select().single();if(i)throw i;return r}static async getBMCTemplates(){let{data:e,error:t}=await o.from("business_model_canvas").select("*").is("project_id",null);if(t)throw t;return e}static async getMunicipalities(){let{data:e,error:t}=await o.from("municipalities").select("*").order("name",{ascending:!0});if(t)throw t;return e}static async searchProjects(e,t,r){let{data:i,error:s}=await o.rpc("search_projects",{search_term:e,status_filter:t,asset_class_filter:r});if(s)throw s;return i}static async getUserProfile(e){let{data:t,error:r}=await o.from("user_profiles").select("*").eq("id",e).single();if(r&&"PGRST116"!==r.code)throw r;return t}static async updateUserProfile(e,t){let{data:r,error:i}=await o.from("user_profiles").upsert(s({id:e},t)).select().single();if(i)throw i;return r}}},793:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});let i=(0,r(7866).createProxy)(String.raw`/Users/natxo/Documents/GitHub/gemini-cli/src/app/projects/[id]/bmc/edit/page.tsx#default`)},1831:(e,t,r)=>{"use strict";let i,s;r.r(t),r.d(t,{BrowserCookieAuthStorageAdapter:()=>S,CookieAuthStorageAdapter:()=>k,DEFAULT_COOKIE_OPTIONS:()=>O,createSupabaseClient:()=>P,isBrowser:()=>C,parseCookies:()=>N,parseSupabaseCookie:()=>w,serializeCookie:()=>E,stringifySupabaseSession:()=>_});var o=r(8893);new TextEncoder;let n=new TextDecoder;o.Buffer.isEncoding("base64url");let a=e=>o.Buffer.from(function(e){let t=e;return t instanceof Uint8Array&&(t=n.decode(t)),t}(e),"base64");var c=r(7634);let l=["exp","sub"];function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){var i,s;i=t,s=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(i))in e?Object.defineProperty(e,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[i]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var d=Object.create,m=Object.defineProperty,f=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyNames,b=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty,y=(e,t,r,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of h(t))g.call(e,s)||s===r||m(e,s,{get:()=>t[s],enumerable:!(i=f(t,s))||i.enumerable});return e},v=(e,t,r)=>(r=null!=e?d(b(e)):{},y(!t&&e&&e.__esModule?r:m(r,"default",{value:e,enumerable:!0}),e)),j=(i={"../../node_modules/.pnpm/cookie@0.5.0/node_modules/cookie/index.js"(e){e.parse=function(e,t){if("string"!=typeof e)throw TypeError("argument str must be a string");for(var r={},s=(t||{}).decode||i,o=0;o<e.length;){var n=e.indexOf("=",o);if(-1===n)break;var a=e.indexOf(";",o);if(-1===a)a=e.length;else if(a<n){o=e.lastIndexOf(";",n-1)+1;continue}var c=e.slice(o,n).trim();if(void 0===r[c]){var l=e.slice(n+1,a).trim();34===l.charCodeAt(0)&&(l=l.slice(1,-1)),r[c]=function(e,t){try{return t(e)}catch(t){return e}}(l,s)}o=a+1}return r},e.serialize=function(e,i,o){var n=o||{},a=n.encode||s;if("function"!=typeof a)throw TypeError("option encode is invalid");if(!r.test(e))throw TypeError("argument name is invalid");var c=a(i);if(c&&!r.test(c))throw TypeError("argument val is invalid");var l=e+"="+c;if(null!=n.maxAge){var u=n.maxAge-0;if(isNaN(u)||!isFinite(u))throw TypeError("option maxAge is invalid");l+="; Max-Age="+Math.floor(u)}if(n.domain){if(!r.test(n.domain))throw TypeError("option domain is invalid");l+="; Domain="+n.domain}if(n.path){if(!r.test(n.path))throw TypeError("option path is invalid");l+="; Path="+n.path}if(n.expires){var p=n.expires;if("[object Date]"!==t.call(p)&&!(p instanceof Date)||isNaN(p.valueOf()))throw TypeError("option expires is invalid");l+="; Expires="+p.toUTCString()}if(n.httpOnly&&(l+="; HttpOnly"),n.secure&&(l+="; Secure"),n.priority)switch("string"==typeof n.priority?n.priority.toLowerCase():n.priority){case"low":l+="; Priority=Low";break;case"medium":l+="; Priority=Medium";break;case"high":l+="; Priority=High";break;default:throw TypeError("option priority is invalid")}if(n.sameSite)switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return l};var t=Object.prototype.toString,r=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function i(e){return -1!==e.indexOf("%")?decodeURIComponent(e):e}function s(e){return encodeURIComponent(e)}}},function(){return s||(0,i[h(i)[0]])((s={exports:{}}).exports,s),s.exports}),x=(v(j()),v(j()));function w(e){if(!e)return null;try{let t=JSON.parse(e);if(!t)return null;if("Object"===t.constructor.name)return t;if("Array"!==t.constructor.name)throw Error(`Unexpected format: ${t.constructor.name}`);let[r,i,s]=t[0].split("."),o=a(i),n=new TextDecoder,c=JSON.parse(n.decode(o)),{exp:u,sub:d}=c,m=function(e,t){if(null==e)return{};var r,i,s=function(e,t){if(null==e)return{};var r,i,s={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(c,l);return{expires_at:u,expires_in:u-Math.round(Date.now()/1e3),token_type:"bearer",access_token:t[0],refresh_token:t[1],provider_token:t[2],provider_refresh_token:t[3],user:p({id:d,factors:t[4]},m)}}catch(e){return console.warn("Failed to parse cookie string:",e),null}}function _(e){var t;return JSON.stringify([e.access_token,e.refresh_token,e.provider_token,e.provider_refresh_token,(null==(t=e.user)?void 0:t.factors)??null])}function C(){return!1}var O={path:"/",sameSite:"lax",maxAge:31536e6},I=RegExp(".{1,3180}","g"),k=class{constructor(e){this.cookieOptions=p(p(p({},O),e),{},{maxAge:O.maxAge})}getItem(e){let t=this.getCookie(e);if(e.endsWith("-code-verifier")&&t)return t;if(t)return JSON.stringify(w(t));let r=function(e,t=()=>null){let r=[];for(let i=0;;i++){let s=t(`${e}.${i}`);if(!s)break;r.push(s)}return r.length?r.join(""):null}(e,e=>this.getCookie(e));return null!==r?JSON.stringify(w(r)):null}setItem(e,t){if(e.endsWith("-code-verifier")){this.setCookie(e,t);return}(function(e,t,r){if(1===Math.ceil(t.length/((void 0)??3180)))return[{name:e,value:t}];let i=[],s=t.match(I);return null==s||s.forEach((t,r)=>{let s=`${e}.${r}`;i.push({name:s,value:t})}),i})(e,_(JSON.parse(t))).forEach(e=>{this.setCookie(e.name,e.value)})}removeItem(e){this._deleteSingleCookie(e),this._deleteChunkedCookies(e)}_deleteSingleCookie(e){this.getCookie(e)&&this.deleteCookie(e)}_deleteChunkedCookies(e,t=0){for(let r=t;;r++){let t=`${e}.${r}`;if(void 0===this.getCookie(t))break;this.deleteCookie(t)}}},S=class extends k{constructor(e){super(e)}getCookie(e){return null}setCookie(e,t){return null}deleteCookie(e){return null}};function P(e,t,r){var i;return(0,c.eI)(e,t,p(p({},r),{},{auth:p({flowType:"pkce",autoRefreshToken:!1,detectSessionInUrl:!1,persistSession:!0,storage:r.auth.storage},(null==(i=r.auth)?void 0:i.storageKey)?{storageKey:r.auth.storageKey}:{})}))}var N=x.parse,E=x.serialize}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[769,634,141],()=>r(2756));module.exports=i})();