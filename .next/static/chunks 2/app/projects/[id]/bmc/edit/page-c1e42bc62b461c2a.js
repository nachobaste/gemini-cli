(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40],{1209:function(e,t,s){Promise.resolve().then(s.bind(s,9549))},2921:function(e,t,s){"use strict";var r=s(6168);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},9549:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var r=s(4513),a=s(5387),n=s(90),c=s(5977),l=s.n(c),i=s(6871),o=s(2921),u=s(9465),m=s(7437);function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function x(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach(function(t){(0,r.Z)(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function h(e){var t,s=e.params.id,c=(0,o.useRouter)(),d=(0,i.useState)({}),h=d[0],p=d[1],v=(0,i.useState)([]),b=v[0],f=v[1],_=(0,i.useState)(!0),j=_[0],y=_[1];(0,i.useEffect)(function(){var e;(e=(0,n.Z)(l().mark(function e(){var t,r,n,c;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([u.k.getBMC(s),u.k.getBMCTemplates()]);case 3:t=e.sent,n=(r=(0,a.Z)(t,2))[0],c=r[1],n&&p(n),f(c),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error fetching data:",e.t0);case 14:return e.prev=14,y(!1),e.finish(14);case 17:case"end":return e.stop()}},e,null,[[0,11,14,17]])})),function(){return e.apply(this,arguments)})()},[s]);var g=function(e){var t=e.target,s=t.name,a=t.value;p(function(e){return x(x({},e),{},(0,r.Z)({},s,a))})},k=(t=(0,n.Z)(l().mark(function e(t){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,u.k.upsertBMC(x(x({},h),{},{project_id:s}));case 4:c.push("/projects/".concat(s)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error("Error saving BMC data:",e.t0);case 10:case"end":return e.stop()}},e,null,[[1,7]])})),function(e){return t.apply(this,arguments)});return j?(0,m.jsx)("div",{children:"Loading..."}):(0,m.jsxs)("div",{className:"container-urbop py-12",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,m.jsx)("h1",{className:"section-title",children:"Editar Business Model Canvas"}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"bmc-template",className:"block text-gray-400 text-sm mb-1",children:"Cargar plantilla"}),(0,m.jsxs)("select",{id:"bmc-template",onChange:function(e){var t=e.target.value,s=b.find(function(e){return e.asset_class===t});s&&p(function(e){return{id:e.id,project_id:e.project_id,value_proposition:s.value_proposition,customer_segments:s.customer_segments,channels:s.channels,customer_relationships:s.customer_relationships,revenue_streams:s.revenue_streams,key_resources:s.key_resources,key_activities:s.key_activities,key_partners:s.key_partners,cost_structure:s.cost_structure}})},className:"select select-bordered w-full max-w-xs",defaultValue:"",children:[(0,m.jsx)("option",{value:"",disabled:!0,children:"Seleccionar plantilla..."}),b.map(function(e){return(0,m.jsx)("option",{value:e.asset_class,children:e.asset_class},e.id)})]})]})]}),(0,m.jsxs)("form",{onSubmit:k,className:"space-y-8",children:[(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"value_proposition",className:"block text-gray-400 text-sm mb-1",children:"Propuesta de Valor"}),(0,m.jsx)("textarea",{id:"value_proposition",name:"value_proposition",value:h.value_proposition||"",onChange:g,className:"textarea w-full"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"customer_segments",className:"block text-gray-400 text-sm mb-1",children:"Segmentos de Clientes"}),(0,m.jsx)("textarea",{id:"customer_segments",name:"customer_segments",value:h.customer_segments||"",onChange:g,className:"textarea w-full"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"channels",className:"block text-gray-400 text-sm mb-1",children:"Canales"}),(0,m.jsx)("textarea",{id:"channels",name:"channels",value:h.channels||"",onChange:g,className:"textarea w-full"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"customer_relationships",className:"block text-gray-400 text-sm mb-1",children:"Relaciones con Clientes"}),(0,m.jsx)("textarea",{id:"customer_relationships",name:"customer_relationships",value:h.customer_relationships||"",onChange:g,className:"textarea w-full"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"revenue_streams",className:"block text-gray-400 text-sm mb-1",children:"Fuentes de Ingresos"}),(0,m.jsx)("textarea",{id:"revenue_streams",name:"revenue_streams",value:h.revenue_streams||"",onChange:g,className:"textarea w-full"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"key_resources",className:"block text-gray-400 text-sm mb-1",children:"Recursos Clave"}),(0,m.jsx)("textarea",{id:"key_resources",name:"key_resources",value:h.key_resources||"",onChange:g,className:"textarea w-full"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"key_activities",className:"block text-gray-400 text-sm mb-1",children:"Actividades Clave"}),(0,m.jsx)("textarea",{id:"key_activities",name:"key_activities",value:h.key_activities||"",onChange:g,className:"textarea w-full"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"key_partners",className:"block text-gray-400 text-sm mb-1",children:"Socios Clave"}),(0,m.jsx)("textarea",{id:"key_partners",name:"key_partners",value:h.key_partners||"",onChange:g,className:"textarea w-full"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"cost_structure",className:"block text-gray-400 text-sm mb-1",children:"Estructura de Costos"}),(0,m.jsx)("textarea",{id:"cost_structure",name:"cost_structure",value:h.cost_structure||"",onChange:g,className:"textarea w-full"})]})]}),(0,m.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,m.jsx)("button",{type:"button",onClick:function(){return c.back()},className:"btn btn-secondary",children:"Cancelar"}),(0,m.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Guardar Cambios"})]})]})]})}}},function(e){e.O(0,[762,14,465,971,529,744],function(){return e(e.s=1209)}),_N_E=e.O()}]);