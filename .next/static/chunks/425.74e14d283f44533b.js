"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[425],{8425:function(e,n,t){t.r(n);var o=t(4513),r=t(6438),i=t.n(r),a=t(6871),c=t(7566),s=t.n(c);t(5046),t(359),t(9003),t(2936);var l=t(7437);function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,o)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach(function(n){(0,o.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}delete s().Icon.Default.prototype._getIconUrl,s().Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"}),n.default=function(e){var n=e.projects,t=e.filters,o=e.onProjectSelect,r=e.compareMode,c=void 0!==r&&r,d=e.onAddToComparison,u=e.selectedForComparison,m=void 0===u?[]:u,f=(0,a.useRef)(null),x=(0,a.useRef)(null),g=(0,a.useRef)([]),b=(0,a.useRef)(null),y=(0,a.useRef)(null),h=(0,a.useState)(!1),v=h[0],w=h[1],j=function(e){var n=m.find(function(n){return n.id===e.id}),t=n?50:40,o=n?14:12;return s().divIcon({className:"custom-marker",html:'\n        <div class="marker-container" style="position: relative;">\n          <div class="marker-pin" style="\n            width: '.concat(t,"px;\n            height: ").concat(t,"px;\n            background: linear-gradient(135deg, ").concat(e.color," 0%, ").concat(e.color,"dd 100%);\n            border: ").concat(n?"4px":"3px"," solid ").concat(n?"#fbbf24":"white",";\n            border-radius: 50%;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-weight: bold;\n            font-size: ").concat(o,"px;\n            color: white;\n            text-shadow: 1px 1px 2px rgba(0,0,0,0.7);\n            box-shadow: 0 ").concat(n?"6px 12px":"4px 8px"," rgba(0,0,0,0.3);\n            cursor: pointer;\n            transition: all 0.3s ease;\n            position: relative;\n            z-index: ").concat(n?"1000":"100",';\n          ">\n            <div style="display: flex; flex-direction: column; align-items: center;">\n              <div style="font-size: ').concat(o-2,'px;">').concat({Residencial:"\uD83C\uDFE0",Comercial:"\uD83C\uDFE2",Oficinas:"\uD83C\uDFEC",Mixto:"\uD83C\uDFD8️",Industrial:"\uD83C\uDFED"}[e.assetClass]||"\uD83D\uDCCD",'</div>\n              <div style="font-size: ').concat(o-4,'px; margin-top: -2px;">').concat(null!==e.score&&void 0!==e.score?e.score.toFixed(1):"N/A",'</div>\n            </div>\n          </div>\n          <div class="marker-label" style="\n            position: absolute;\n            top: ').concat(t+5,'px;\n            left: 50%;\n            transform: translateX(-50%);\n            background: rgba(0,0,0,0.9);\n            color: white;\n            padding: 6px 10px;\n            border-radius: 6px;\n            font-size: 11px;\n            white-space: nowrap;\n            pointer-events: none;\n            opacity: 0;\n            transition: opacity 0.3s ease;\n            box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n            z-index: 1001;\n          ">\n            <div style="font-weight: bold; margin-bottom: 2px;">').concat(e.name,'</div>\n            <div style="font-size: 10px; color: #ccc;">').concat(e.assetClass," • Score: ").concat(null!==e.score&&void 0!==e.score?e.score.toFixed(1):"N/A","</div>\n          </div>\n          ").concat(n?'\n            <div style="\n              position: absolute;\n              top: -5px;\n              right: -5px;\n              width: 20px;\n              height: 20px;\n              background: #fbbf24;\n              border: 2px solid white;\n              border-radius: 50%;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              font-size: 12px;\n              z-index: 1002;\n            ">✓</div>\n          ':"","\n        </div>\n      "),iconSize:[t,t],iconAnchor:[t/2,t/2]})};return(0,a.useEffect)(function(){if(f.current&&!x.current){var e=s().map(f.current,{center:[14.6349,-90.5069],zoom:11,zoomControl:!1,attributionControl:!1,preferCanvas:!0});s().control.zoom({position:"topright"}).addTo(e),s().control.scale({position:"bottomleft"}).addTo(e);var n={map:s().tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",{attribution:"\xa9 OpenStreetMap contributors \xa9 CARTO",subdomains:"abcd",maxZoom:19}),satellite:s().tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"\xa9 Esri",maxZoom:19}),hybrid:s().tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"\xa9 Esri",maxZoom:19})};return n.map.addTo(e),e.tileLayers=n,b.current=s().markerClusterGroup({chunkedLoading:!0,chunkProgress:function(e,n){},iconCreateFunction:function(e){var n=e.getChildCount(),t=e.getAllChildMarkers(),o=t.reduce(function(e,n){var t;return e+((null===(t=n.options.project)||void 0===t?void 0:t.score)||0)},0)/t.length,r="#6b7280";return r=o>=8.5?"#22c55e":o>=7.5?"#84cc16":o>=6.5?"#eab308":o>=5.5?"#f97316":"#ef4444",s().divIcon({html:'\n            <div style="\n              background: '.concat(r,';\n              border: 3px solid white;\n              border-radius: 50%;\n              width: 40px;\n              height: 40px;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              color: white;\n              font-weight: bold;\n              font-size: 14px;\n              box-shadow: 0 4px 8px rgba(0,0,0,0.3);\n            ">\n              ').concat(n,"\n            </div>\n          "),className:"marker-cluster-custom",iconSize:[40,40]})},spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,zoomToBoundsOnClick:!0,maxClusterRadius:50}),e.addLayer(b.current),x.current=e,w(!0),function(){x.current&&(x.current.remove(),x.current=null,b.current=null,w(!1))}}},[]),(0,a.useEffect)(function(){if(x.current&&v){var e=x.current,n=e.tileLayers;e.eachLayer(function(n){n instanceof s().TileLayer&&e.removeLayer(n)}),n[t.viewMode]&&n[t.viewMode].addTo(e),"hybrid"===t.viewMode&&s().tileLayer("https://{s}.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}{r}.png",{attribution:"",subdomains:"abcd",maxZoom:19,pane:"overlayPane"}).addTo(e)}},[t.viewMode,v]),(0,a.useEffect)(function(){if(x.current&&b.current&&v){if(b.current.clearLayers(),g.current.forEach(function(e){x.current&&x.current.hasLayer(e)&&x.current.removeLayer(e)}),g.current=[],y.current&&x.current.hasLayer(y.current)&&(x.current.removeLayer(y.current),y.current=null),t.layers.projects&&n.forEach(function(e){var n=j(e),r=s().marker(e.coordinates,{icon:n});r.on("mouseover",function(e){var n=e.target.getElement();if(n){var t=n.querySelector(".marker-container"),o=null==t?void 0:t.querySelector(".marker-pin"),r=null==t?void 0:t.querySelector(".marker-label");o&&(o.style.transform="scale(1.1)",o.style.zIndex="1000"),r&&(r.style.opacity="1")}}),r.on("mouseout",function(e){var n=e.target.getElement();if(n){var t=n.querySelector(".marker-container"),o=null==t?void 0:t.querySelector(".marker-pin"),r=null==t?void 0:t.querySelector(".marker-label");o&&(o.style.transform="scale(1)",o.style.zIndex="auto"),r&&(r.style.opacity="0")}}),r.on("click",function(){o(e),x.current.flyTo(e.coordinates,15,{duration:1.5})});var i='\n          <div style="min-width: 250px; font-family: Inter, sans-serif;">\n            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px;">\n              <h3 style="margin: 0; font-size: 18px; font-weight: bold; color: #1f2937; flex: 1;">'.concat(e.name,'</h3>\n              <div style="\n                background: ').concat(e.color,';\n                color: white;\n                padding: 4px 10px;\n                border-radius: 16px;\n                font-size: 14px;\n                font-weight: bold;\n                margin-left: 8px;\n              ">').concat(null!==e.score&&void 0!==e.score?e.score.toFixed(1):"N/A",'</div>\n            </div>\n            \n            <div style="display: flex; align-items: center; margin-bottom: 8px; color: #6b7280;">\n              <svg style="width: 14px; height: 14px; margin-right: 6px;" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>\n                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>\n              </svg>\n              <span style="font-size: 14px;">').concat(e.address,'</span>\n            </div>\n            \n            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 12px; font-size: 13px;">\n              <div>\n                <div style="color: #9ca3af; margin-bottom: 2px;">Presupuesto</div>\n                <div style="font-weight: 600; color: #374151;">$').concat((e.budget/1e6).toFixed(1),'M</div>\n              </div>\n              <div>\n                <div style="color: #9ca3af; margin-bottom: 2px;">\xc1rea</div>\n                <div style="font-weight: 600; color: #374151;">').concat(e.area.toLocaleString(),' m\xb2</div>\n              </div>\n              <div>\n                <div style="color: #9ca3af; margin-bottom: 2px;">Unidades</div>\n                <div style="font-weight: 600; color: #374151;">').concat(e.units,'</div>\n              </div>\n              <div>\n                <div style="color: #9ca3af; margin-bottom: 2px;">Pisos</div>\n                <div style="font-weight: 600; color: #374151;">').concat(e.floors,'</div>\n              </div>\n            </div>\n            \n            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">\n              <div style="display: flex; align-items: center;">\n                <div style="\n                  width: 12px;\n                  height: 12px;\n                  background: ').concat(e.color,';\n                  border-radius: 50%;\n                  margin-right: 6px;\n                "></div>\n                <span style="font-size: 14px; color: #4b5563; font-weight: 500;">').concat(e.assetClass,'</span>\n              </div>\n              <span style="font-size: 12px; color: #10b981; font-weight: 600; background: #d1fae5; padding: 2px 8px; border-radius: 12px;">').concat(e.status,'</span>\n            </div>\n            \n            <div style="display: flex; gap: 8px;">\n              <a href="/projects/').concat(e.id,'" style="\n                flex: 1;\n                display: inline-block;\n                background: linear-gradient(135deg, #c5ff00 0%, #a3d600 100%);\n                color: black;\n                padding: 8px 16px;\n                border-radius: 8px;\n                text-decoration: none;\n                font-size: 13px;\n                font-weight: 600;\n                text-align: center;\n                transition: transform 0.2s ease;\n              " onmouseover="this.style.transform=\'scale(1.02)\'" onmouseout="this.style.transform=\'scale(1)\'">\n                Ver Detalles\n              </a>\n              ').concat(c?'\n                <button id="compare-button-'.concat(e.id,'" style="\n                  background: #3b82f6;\n                  color: white;\n                  padding: 8px 12px;\n                  border: none;\n                  border-radius: 8px;\n                  font-size: 13px;\n                  font-weight: 600;\n                  cursor: pointer;\n                  transition: background 0.2s ease;\n                " onmouseover="this.style.background=\'#2563eb\'" onmouseout="this.style.background=\'#3b82f6\'">\n                  Comparar\n                </button>\n              '):"","\n            </div>\n          </div>\n        ");r.bindPopup(i,{maxWidth:300,className:"custom-popup"}),r.on("popupopen",function(){if(c&&d){var n=document.getElementById("compare-button-".concat(e.id));n&&(n.onclick=function(){d(e)})}}),t.layers.clusters?b.current.addLayer(r):(r.addTo(x.current),g.current.push(r))}),t.layers.heatmap&&n.length>0){n.map(function(e){return[e.coordinates[0],e.coordinates[1],e.score/10]});var e=s().layerGroup();n.forEach(function(n){var t=n.score/10,o=s().circle(n.coordinates,{radius:500+1e3*t,fillColor:n.color,fillOpacity:.1+.2*t,color:n.color,weight:1,opacity:.3});e.addLayer(o)}),e.addTo(x.current),y.current=e,g.current.push(e)}if(t.layers.municipalities){var r=s().polygon([[14.7,-90.6],[14.7,-90.4],[14.5,-90.4],[14.5,-90.6],[14.7,-90.6]],{color:"#6b7280",weight:2,opacity:.6,fillColor:"#6b7280",fillOpacity:.05,dashArray:"5, 5"}).addTo(x.current);r.bindTooltip("Ciudad de Guatemala",{permanent:!1,direction:"center",className:"municipality-tooltip"}),g.current.push(r)}t.layers.roads&&[[[14.6349,-90.5069],[14.61,-90.48],[14.58,-90.45]],[[14.6349,-90.5069],[14.62,-90.49],[14.6,-90.47]],[[14.6349,-90.5069],[14.61,-90.52],[14.59,-90.54]]].forEach(function(e,n){var t=s().polyline(e,{color:"#9ca3af",weight:3,opacity:.7,dashArray:0===n?void 0:"10, 5"}).addTo(x.current);t.bindTooltip("Carretera Principal ".concat(n+1),{permanent:!1,direction:"center"}),g.current.push(t)}),t.layers.population&&[{center:[14.6349,-90.5069],radius:2e3,density:"high"},{center:[14.61,-90.49],radius:1500,density:"medium"},{center:[14.65,-90.52],radius:1e3,density:"low"}].forEach(function(e){var n={high:{color:"#ef4444",opacity:.4},medium:{color:"#f59e0b",opacity:.3},low:{color:"#22c55e",opacity:.2}},t=s().circle(e.center,p(p({radius:e.radius},n[e.density]),{},{fillColor:n[e.density].color,fillOpacity:n[e.density].opacity,weight:2})).addTo(x.current);t.bindTooltip("Densidad Poblacional ".concat("high"===e.density?"Alta":"medium"===e.density?"Media":"Baja"),{permanent:!1,direction:"center"}),g.current.push(t)})}},[n,t,o,c,d,m,v]),(0,l.jsxs)("div",{className:"jsx-566148335 relative w-full h-full z-0",children:[(0,l.jsx)("div",{ref:f,className:"jsx-566148335 w-full h-full rounded-xl"}),(0,l.jsxs)("div",{className:"jsx-566148335 absolute top-4 left-4 z-[1000] space-y-2",children:[(0,l.jsxs)("div",{className:"jsx-566148335 glass-effect rounded-lg p-3",children:[(0,l.jsxs)("div",{className:"jsx-566148335 text-sm text-gray-700 font-medium mb-1",children:[n.length," Proyectos Visibles"]}),(0,l.jsxs)("div",{className:"jsx-566148335 text-xs text-gray-500",children:["Score promedio:"," ",n.length>0?(n.reduce(function(e,n){return e+n.score},0)/n.length).toFixed(1):"0.0"]})]}),c&&(0,l.jsxs)("div",{className:"jsx-566148335 glass-effect rounded-lg p-3",children:[(0,l.jsx)("div",{className:"jsx-566148335 text-sm text-blue-700 font-medium",children:"Modo Comparaci\xf3n Activo"}),(0,l.jsxs)("div",{className:"jsx-566148335 text-xs text-blue-600",children:[m.length,"/3 seleccionados"]})]})]}),t.layers.clusters&&(0,l.jsx)("div",{className:"jsx-566148335 absolute top-4 right-16 z-[1000]",children:(0,l.jsxs)("div",{className:"jsx-566148335 glass-effect rounded-lg p-3",children:[(0,l.jsx)("div",{className:"jsx-566148335 text-xs text-gray-700 font-medium mb-2",children:"Clusters por Score"}),(0,l.jsx)("div",{className:"jsx-566148335 space-y-1",children:[{range:"8.5+",color:"#22c55e",label:"Excelente"},{range:"7.5+",color:"#84cc16",label:"Muy Bueno"},{range:"6.5+",color:"#eab308",label:"Bueno"},{range:"5.5+",color:"#f97316",label:"Regular"},{range:"<5.5",color:"#ef4444",label:"Bajo"}].map(function(e){var n=e.range,t=e.color,o=e.label;return(0,l.jsxs)("div",{className:"jsx-566148335 flex items-center text-xs",children:[(0,l.jsx)("div",{style:{backgroundColor:t},className:"jsx-566148335 w-3 h-3 rounded-full mr-2 border border-white"}),(0,l.jsxs)("span",{className:"jsx-566148335 text-gray-600",children:[n," - ",o]})]},n)})})]})}),(0,l.jsx)("div",{className:"jsx-566148335 absolute bottom-2 right-2 z-[1000]",children:(0,l.jsx)("div",{className:"jsx-566148335 text-xs text-gray-500 bg-white bg-opacity-80 px-2 py-1 rounded",children:"\xa9 OpenStreetMap \xa9 CARTO \xa9 Esri"})}),(0,l.jsx)(i(),{id:"566148335",children:[".custom-popup .leaflet-popup-content-wrapper{background:white;border-radius:12px;box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04);border:1px solid #e5e7eb;}",".custom-popup .leaflet-popup-tip{background:white;border:1px solid #e5e7eb;}",".municipality-tooltip{background:rgba(0,0,0,0.8) !important;border:none !important;color:white !important;font-size:12px !important;padding:6px 10px !important;border-radius:6px !important;font-weight:500 !important;}",".marker-cluster-custom{background:transparent !important;}",".leaflet-control-zoom a{background:white !important;color:#374151 !important;border:1px solid #d1d5db !important;font-size:16px !important;font-weight:bold !important;}",".leaflet-control-zoom a:hover{background:#f3f4f6 !important;color:#111827 !important;}",".leaflet-control-scale-line{background:rgba(255,255,255,0.8) !important;border:2px solid #374151 !important;color:#374151 !important;font-weight:500 !important;}"]})]})}}}]);