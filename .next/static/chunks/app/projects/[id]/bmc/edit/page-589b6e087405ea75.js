(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40],{1209:function(e,s,t){Promise.resolve().then(t.bind(t,9549))},2921:function(e,s,t){"use strict";var r=t(6168);t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}})},9549:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return f}});var r=t(4513),a=t(3366),n=t(5387),l=t(90),i=t(5977),c=t.n(i),o=t(4648),u=t(6871),d=t(2921),m=t(9465),g=t(7437),p=["id","created_at","updated_at","project_id"];function h(e,s){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),t.push.apply(t,r)}return t}function b(e){for(var s=1;s<arguments.length;s++){var t=null!=arguments[s]?arguments[s]:{};s%2?h(Object(t),!0).forEach(function(s){(0,r.Z)(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function f(e){var s,t=e.params.id,i=(0,d.useRouter)(),h=(0,o.createClientComponentClient)(),f=(0,u.useState)({project_id:t}),x=f[0],v=f[1],j=(0,u.useState)([]),y=j[0],N=j[1],_=(0,u.useState)(!0),w=_[0],k=_[1],C=(0,u.useState)(null),O=C[0],P=C[1];(0,u.useEffect)(function(){var e;(e=(0,l.Z)(c().mark(function e(){var s,r,a,l;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([m.k.getBMC(t,h),m.k.getBMCTemplates(h)]);case 3:s=e.sent,a=(r=(0,n.Z)(s,2))[0],l=r[1],a&&v(a),N(l),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error fetching data:",e.t0),P("Failed to load Business Model Canvas data or templates.");case 15:return e.prev=15,k(!1),e.finish(15);case 18:case"end":return e.stop()}},e,null,[[0,11,15,18]])})),function(){return e.apply(this,arguments)})()},[t,h]);var S=function(e){var s=e.target,t=s.name,a=s.value;v(function(e){return b(b({},e),{},(0,r.Z)({},t,a))})},F=(s=(0,l.Z)(c().mark(function e(s){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),k(!0),P(null),e.prev=3,e.next=6,m.k.upsertBMC(b(b({},x),{},{project_id:t}),h);case 6:i.push("/projects/".concat(t)),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(3),console.error("Error saving BMC:",e.t0),P("Failed to save Business Model Canvas."),k(!1);case 14:case"end":return e.stop()}},e,null,[[3,9]])})),function(e){return s.apply(this,arguments)});return w?(0,g.jsx)("div",{children:"Loading..."}):O?(0,g.jsx)("div",{className:"text-red-500",children:O}):(0,g.jsxs)("div",{className:"container-urbop py-12",children:[(0,g.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,g.jsxs)("h1",{className:"text-3xl font-bold",children:[x.id?"Edit":"Create"," Business Model Canvas"]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"template-select",className:"block text-sm font-medium text-gray-400 mr-2",children:"Apply Template:"}),(0,g.jsxs)("select",{id:"template-select",onChange:function(e){var s=e.target.value,t=y.find(function(e){return e.id===s});if(t){t.id,t.created_at,t.updated_at,t.project_id;var r=(0,a.Z)(t,p);v(function(e){return b(b({},e),r)})}},className:"bg-gray-800 text-white p-2 rounded-md focus:ring-2 focus:ring-lime-500",children:[(0,g.jsx)("option",{value:"",className:"text-white",children:"Select a template"}),y.map(function(e){return(0,g.jsx)("option",{value:e.id,className:"text-white",children:e.asset_class},e.id)})]})]})]}),(0,g.jsxs)("form",{onSubmit:F,className:"space-y-8",children:[(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,g.jsxs)("div",{className:"space-y-8",children:[(0,g.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[(0,g.jsx)("label",{htmlFor:"key_partners",className:"block text-lg font-semibold mb-2",children:"Key Partners"}),(0,g.jsx)("textarea",{id:"key_partners",name:"key_partners",value:x.key_partners||"",onChange:S,rows:5,className:"w-full bg-gray-900 text-white p-3 rounded-md focus:ring-2 focus:ring-lime-500"})]}),(0,g.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[(0,g.jsx)("label",{htmlFor:"key_activities",className:"block text-lg font-semibold mb-2",children:"Key Activities"}),(0,g.jsx)("textarea",{id:"key_activities",name:"key_activities",value:x.key_activities||"",onChange:S,rows:5,className:"w-full bg-gray-900 text-white p-3 rounded-md focus:ring-2 focus:ring-lime-500"})]}),(0,g.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[(0,g.jsx)("label",{htmlFor:"key_resources",className:"block text-lg font-semibold mb-2",children:"Key Resources"}),(0,g.jsx)("textarea",{id:"key_resources",name:"key_resources",value:x.key_resources||"",onChange:S,rows:5,className:"w-full bg-gray-900 text-white p-3 rounded-md focus:ring-2 focus:ring-lime-500"})]})]}),(0,g.jsxs)("div",{className:"space-y-8",children:[(0,g.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[(0,g.jsx)("label",{htmlFor:"value_proposition",className:"block text-lg font-semibold mb-2",children:"Value Proposition"}),(0,g.jsx)("textarea",{id:"value_proposition",name:"value_proposition",value:x.value_proposition||"",onChange:S,rows:5,className:"w-full bg-gray-900 text-white p-3 rounded-md focus:ring-2 focus:ring-lime-500"})]}),(0,g.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[(0,g.jsx)("label",{htmlFor:"customer_relationships",className:"block text-lg font-semibold mb-2",children:"Customer Relationships"}),(0,g.jsx)("textarea",{id:"customer_relationships",name:"customer_relationships",value:x.customer_relationships||"",onChange:S,rows:5,className:"w-full bg-gray-900 text-white p-3 rounded-md focus:ring-2 focus:ring-lime-500"})]}),(0,g.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[(0,g.jsx)("label",{htmlFor:"channels",className:"block text-lg font-semibold mb-2",children:"Channels"}),(0,g.jsx)("textarea",{id:"channels",name:"channels",value:x.channels||"",onChange:S,rows:5,className:"w-full bg-gray-900 text-white p-3 rounded-md focus:ring-2 focus:ring-lime-500"})]})]}),(0,g.jsx)("div",{className:"space-y-8",children:(0,g.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[(0,g.jsx)("label",{htmlFor:"customer_segments",className:"block text-lg font-semibold mb-2",children:"Customer Segments"}),(0,g.jsx)("textarea",{id:"customer_segments",name:"customer_segments",value:x.customer_segments||"",onChange:S,rows:5,className:"w-full bg-gray-900 text-white p-3 rounded-md focus:ring-2 focus:ring-lime-500"})]})})]}),(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,g.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[(0,g.jsx)("label",{htmlFor:"cost_structure",className:"block text-lg font-semibold mb-2",children:"Cost Structure"}),(0,g.jsx)("textarea",{id:"cost_structure",name:"cost_structure",value:x.cost_structure||"",onChange:S,rows:5,className:"w-full bg-gray-900 text-white p-3 rounded-md focus:ring-2 focus:ring-lime-500"})]}),(0,g.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[(0,g.jsx)("label",{htmlFor:"revenue_streams",className:"block text-lg font-semibold mb-2",children:"Revenue Streams"}),(0,g.jsx)("textarea",{id:"revenue_streams",name:"revenue_streams",value:x.revenue_streams||"",onChange:S,rows:5,className:"w-full bg-gray-900 text-white p-3 rounded-md focus:ring-2 focus:ring-lime-500"})]})]}),(0,g.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,g.jsx)("button",{type:"button",onClick:function(){return i.back()},className:"btn btn-secondary",disabled:w,children:"Cancel"}),(0,g.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:w,children:w?"Saving...":"Save BMC"})]})]})]})}}},function(e){e.O(0,[762,14,648,465,971,529,744],function(){return e(e.s=1209)}),_N_E=e.O()}]);