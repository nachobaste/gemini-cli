(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40],{1209:function(e,s,t){Promise.resolve().then(t.bind(t,9549))},2921:function(e,s,t){"use strict";var r=t(6168);t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}})},9549:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return h}});var r=t(4513),n=t(3366),a=t(5387),l=t(90),i=t(5977),c=t.n(i),o=t(6871),u=t(2921),d=t(417),m=t(7437),g=["id","created_at","updated_at","project_id"];function p(e,s){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),t.push.apply(t,r)}return t}function f(e){for(var s=1;s<arguments.length;s++){var t=null!=arguments[s]?arguments[s]:{};s%2?p(Object(t),!0).forEach(function(s){(0,r.Z)(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function h(e){var s,t=e.params.id,i=(0,u.useRouter)(),p=(0,o.useState)({project_id:t}),h=p[0],b=p[1],x=(0,o.useState)([]),v=x[0],j=x[1],y=(0,o.useState)(!0),N=y[0],_=y[1],w=(0,o.useState)(null),k=w[0],C=w[1];(0,o.useEffect)(function(){var e;(e=(0,l.Z)(c().mark(function e(){var s,r,n,l;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([d.k.getBMC(t),d.k.getBMCTemplates()]);case 3:s=e.sent,n=(r=(0,a.Z)(s,2))[0],l=r[1],n&&b(n),j(l),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error fetching data:",e.t0),C("Failed to load Business Model Canvas data or templates.");case 15:return e.prev=15,_(!1),e.finish(15);case 18:case"end":return e.stop()}},e,null,[[0,11,15,18]])})),function(){return e.apply(this,arguments)})()},[t]);var O=function(e){var s=e.target,t=s.name,n=s.value;b(function(e){return f(f({},e),{},(0,r.Z)({},t,n))})},P=(s=(0,l.Z)(c().mark(function e(s){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),_(!0),C(null),e.prev=3,e.next=6,d.k.upsertBMC(f(f({},h),{},{project_id:t}));case 6:i.push("/projects/".concat(t)),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(3),console.error("Error saving BMC:",e.t0),C("Failed to save Business Model Canvas."),_(!1);case 14:case"end":return e.stop()}},e,null,[[3,9]])})),function(e){return s.apply(this,arguments)});return N?(0,m.jsx)("div",{children:"Loading..."}):k?(0,m.jsx)("div",{className:"text-red-500",children:k}):(0,m.jsxs)("div",{className:"container-urbop py-12",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,m.jsxs)("h1",{className:"text-3xl font-bold",children:[h.id?"Edit":"Create"," Business Model Canvas"]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"template-select",className:"block text-sm font-medium text-gray-400 mr-2",children:"Apply Template:"}),(0,m.jsxs)("select",{id:"template-select",onChange:function(e){var s=e.target.value,t=v.find(function(e){return e.id===s});if(t){t.id,t.created_at,t.updated_at,t.project_id;var r=(0,n.Z)(t,g);b(function(e){return f(f({},e),r)})}},className:"bg-gray-800 text-white p-2 rounded-md focus:ring-2 focus:ring-lime-500",children:[(0,m.jsx)("option",{value:"",className:"text-white",children:"Select a template"}),v.map(function(e){return(0,m.jsx)("option",{value:e.id,className:"text-white",children:e.asset_class},e.id)})]})]})]}),(0,m.jsxs)("form",{onSubmit:P,className:"space-y-8",children:[(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,m.jsxs)("div",{className:"space-y-8",children:[(0,m.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[(0,m.jsx)("label",{htmlFor:"key_partners",className:"block text-lg font-semibold mb-2",children:"Key Partners"}),(0,m.jsx)("textarea",{id:"key_partners",name:"key_partners",value:h.key_partners||"",onChange:O,rows:5,className:"w-full bg-gray-900 text-white p-3 rounded-md focus:ring-2 focus:ring-lime-500"})]}),(0,m.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[(0,m.jsx)("label",{htmlFor:"key_activities",className:"block text-lg font-semibold mb-2",children:"Key Activities"}),(0,m.jsx)("textarea",{id:"key_activities",name:"key_activities",value:h.key_activities||"",onChange:O,rows:5,className:"w-full bg-gray-900 text-white p-3 rounded-md focus:ring-2 focus:ring-lime-500"})]}),(0,m.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[(0,m.jsx)("label",{htmlFor:"key_resources",className:"block text-lg font-semibold mb-2",children:"Key Resources"}),(0,m.jsx)("textarea",{id:"key_resources",name:"key_resources",value:h.key_resources||"",onChange:O,rows:5,className:"w-full bg-gray-900 text-white p-3 rounded-md focus:ring-2 focus:ring-lime-500"})]})]}),(0,m.jsxs)("div",{className:"space-y-8",children:[(0,m.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[(0,m.jsx)("label",{htmlFor:"value_proposition",className:"block text-lg font-semibold mb-2",children:"Value Proposition"}),(0,m.jsx)("textarea",{id:"value_proposition",name:"value_proposition",value:h.value_proposition||"",onChange:O,rows:5,className:"w-full bg-gray-900 text-white p-3 rounded-md focus:ring-2 focus:ring-lime-500"})]}),(0,m.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[(0,m.jsx)("label",{htmlFor:"customer_relationships",className:"block text-lg font-semibold mb-2",children:"Customer Relationships"}),(0,m.jsx)("textarea",{id:"customer_relationships",name:"customer_relationships",value:h.customer_relationships||"",onChange:O,rows:5,className:"w-full bg-gray-900 text-white p-3 rounded-md focus:ring-2 focus:ring-lime-500"})]}),(0,m.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[(0,m.jsx)("label",{htmlFor:"channels",className:"block text-lg font-semibold mb-2",children:"Channels"}),(0,m.jsx)("textarea",{id:"channels",name:"channels",value:h.channels||"",onChange:O,rows:5,className:"w-full bg-gray-900 text-white p-3 rounded-md focus:ring-2 focus:ring-lime-500"})]})]}),(0,m.jsx)("div",{className:"space-y-8",children:(0,m.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[(0,m.jsx)("label",{htmlFor:"customer_segments",className:"block text-lg font-semibold mb-2",children:"Customer Segments"}),(0,m.jsx)("textarea",{id:"customer_segments",name:"customer_segments",value:h.customer_segments||"",onChange:O,rows:5,className:"w-full bg-gray-900 text-white p-3 rounded-md focus:ring-2 focus:ring-lime-500"})]})})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,m.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[(0,m.jsx)("label",{htmlFor:"cost_structure",className:"block text-lg font-semibold mb-2",children:"Cost Structure"}),(0,m.jsx)("textarea",{id:"cost_structure",name:"cost_structure",value:h.cost_structure||"",onChange:O,rows:5,className:"w-full bg-gray-900 text-white p-3 rounded-md focus:ring-2 focus:ring-lime-500"})]}),(0,m.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[(0,m.jsx)("label",{htmlFor:"revenue_streams",className:"block text-lg font-semibold mb-2",children:"Revenue Streams"}),(0,m.jsx)("textarea",{id:"revenue_streams",name:"revenue_streams",value:h.revenue_streams||"",onChange:O,rows:5,className:"w-full bg-gray-900 text-white p-3 rounded-md focus:ring-2 focus:ring-lime-500"})]})]}),(0,m.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,m.jsx)("button",{type:"button",onClick:function(){return i.back()},className:"btn btn-secondary",disabled:N,children:"Cancel"}),(0,m.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:N,children:N?"Saving...":"Save BMC"})]})]})]})}},3366:function(e,s,t){"use strict";function r(e,s){if(null==e)return{};var t,r,n=function(e,s){if(null==e)return{};var t,r,n={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],s.indexOf(t)>=0||(n[t]=e[t]);return n}(e,s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],!(s.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}t.d(s,{Z:function(){return r}})}},function(e){e.O(0,[762,789,417,971,529,744],function(){return e(e.s=1209)}),_N_E=e.O()}]);