(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[883],{8406:function(e,t,s){Promise.resolve().then(s.bind(s,4672))},166:function(e,t,s){"use strict";s.d(t,{default:function(){return r.a}});var a=s(5775),r=s.n(a)},5775:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let a=s(7043);s(7437),s(2265);let r=a._(s(5602));function l(e,t){var s;let a={loading:e=>{let{error:t,isLoading:s,pastDelay:a}=e;return null}};"function"==typeof e&&(a.loader=e);let l={...a,...t};return(0,r.default)({...l,modules:null==(s=l.loadableGenerated)?void 0:s.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1523:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return r}});let a=s(8993);function r(e){let{reason:t,children:s}=e;if("undefined"==typeof window)throw new a.BailoutToCSRError(t);return s}},5602:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let a=s(7437),r=s(2265),l=s(1523),i=s(49);function c(e){return{default:e&&"default"in e?e.default:e}}let n={loader:()=>Promise.resolve(c(()=>null)),loading:null,ssr:!0},o=function(e){let t={...n,...e},s=(0,r.lazy)(()=>t.loader().then(c)),o=t.loading;function d(e){let c=o?(0,a.jsx)(o,{isLoading:!0,pastDelay:!0,error:null}):null,n=t.ssr?(0,a.jsxs)(a.Fragment,{children:["undefined"==typeof window?(0,a.jsx)(i.PreloadCss,{moduleIds:t.modules}):null,(0,a.jsx)(s,{...e})]}):(0,a.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(s,{...e})});return(0,a.jsx)(r.Suspense,{fallback:c,children:n})}return d.displayName="LoadableComponent",d}},49:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return l}});let a=s(7437),r=s(544);function l(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let s=(0,r.getExpectedRequestStore)("next/dynamic css"),l=[];if(s.reactLoadableManifest&&t){let e=s.reactLoadableManifest;for(let s of t){if(!e[s])continue;let t=e[s].files.filter(e=>e.endsWith(".css"));l.push(...t)}}return 0===l.length?null:(0,a.jsx)(a.Fragment,{children:l.map(e=>(0,a.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:s.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},4672:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var a=s(7437),r=s(2265),l=s(166),i=e=>{let{projects:t,onClose:s,onRemoveProject:l}=e,[i,c]=(0,r.useState)("overview");if(0===t.length)return null;let n=e=>e>=8.5?"text-green-600 bg-green-100":e>=7.5?"text-lime-600 bg-lime-100":e>=6.5?"text-yellow-600 bg-yellow-100":e>=5.5?"text-orange-600 bg-orange-100":"text-red-600 bg-red-100",o=e=>"$".concat((e/1e6).toFixed(1),"M");return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Comparaci\xf3n de Proyectos"}),(0,a.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsx)("div",{className:"flex space-x-1 mt-4",children:[{key:"overview",label:"Resumen General"},{key:"financial",label:"Datos Financieros"},{key:"technical",label:"Especificaciones"},{key:"location",label:"Ubicaci\xf3n"}].map(e=>{let{key:t,label:s}=e;return(0,a.jsx)("button",{onClick:()=>c(t),className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat(i===t?"bg-lime-600 text-white":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:s},t)})})]}),(0,a.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:t.map(e=>(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 relative",children:[(0,a.jsx)("button",{onClick:()=>l(e.id),className:"absolute top-2 right-2 text-gray-400 hover:text-red-500 transition-colors",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,a.jsxs)("div",{className:"flex items-center mb-3",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full mr-3",style:{backgroundColor:e.color}}),(0,a.jsx)("h3",{className:"font-bold text-gray-900 text-lg",children:e.name})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:e.assetClass}),(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(n(e.score)),children:e.score})]})]},e.id))}),"overview"===i&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Comparaci\xf3n de Scores MCDA"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(e=>(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold mb-2",style:{color:e.color},children:e.score}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:e.name}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full",style:{backgroundColor:e.color,width:"".concat(e.score/10*100,"%")}})})]},e.id))})]}),(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Estado de Proyectos"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(e=>(0,a.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900 mb-2",children:e.name}),(0,a.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-medium ".concat("Activo"===e.status?"bg-green-100 text-green-800":"En Desarrollo"===e.status?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"),children:e.status})]},e.id))})]})]}),"financial"===i&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Comparaci\xf3n Financiera"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Proyecto"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Presupuesto"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Costo por m\xb2"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Costo por Unidad"})]})}),(0,a.jsx)("tbody",{children:t.map(e=>(0,a.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:e.color}}),e.name]})}),(0,a.jsx)("td",{className:"py-3 px-4 font-medium",children:o(e.budget)}),(0,a.jsxs)("td",{className:"py-3 px-4",children:["$",Math.round(e.budget/e.area).toLocaleString()]}),(0,a.jsxs)("td",{className:"py-3 px-4",children:["$",Math.round(e.budget/e.units).toLocaleString()]})]},e.id))})]})})]}),(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Potencial de Retorno"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(e=>{let t=(10*e.score).toFixed(1);return(0,a.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900 mb-2",children:e.name}),(0,a.jsxs)("div",{className:"text-2xl font-bold mb-1",style:{color:e.color},children:[t,"%"]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"ROI Estimado"})]},e.id)})})]})]}),"technical"===i&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Especificaciones T\xe9cnicas"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Proyecto"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"\xc1rea Total"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Unidades"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Pisos"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Desarrollador"})]})}),(0,a.jsx)("tbody",{children:t.map(e=>(0,a.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:e.color}}),e.name]})}),(0,a.jsxs)("td",{className:"py-3 px-4",children:[e.area.toLocaleString()," m\xb2"]}),(0,a.jsx)("td",{className:"py-3 px-4",children:e.units}),(0,a.jsx)("td",{className:"py-3 px-4",children:e.floors}),(0,a.jsx)("td",{className:"py-3 px-4 text-sm",children:e.developer})]},e.id))})]})})]}),(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Cronograma de Finalizaci\xf3n"}),(0,a.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full mr-3",style:{backgroundColor:e.color}}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:e.name})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:new Date(e.completionDate).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[Math.ceil((new Date(e.completionDate).getTime()-new Date().getTime())/864e5)," ","d\xedas restantes"]})]})]},e.id))})]})]}),"location"===i&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Detalles de Ubicaci\xf3n"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center mb-3",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full mr-2",style:{backgroundColor:e.color}}),(0,a.jsx)("h5",{className:"font-medium text-gray-900",children:e.name})]}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Direcci\xf3n:"}),(0,a.jsx)("div",{className:"font-medium",children:e.address})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Coordenadas:"}),(0,a.jsxs)("div",{className:"font-mono text-xs",children:[e.coordinates[0].toFixed(6),", ",e.coordinates[1].toFixed(6)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Zona:"}),(0,a.jsx)("div",{className:"font-medium",children:e.location})]})]}),(0,a.jsx)("button",{className:"mt-3 w-full bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 px-3 rounded text-sm transition-colors",children:"Ver en Mapa"})]},e.id))})]}),(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Matriz de Distancias"}),(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-4",children:"Distancias aproximadas entre proyectos (en l\xednea recta)"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,a.jsx)("th",{className:"text-left py-2 px-3 font-medium text-gray-900",children:"Proyecto"}),t.map(e=>(0,a.jsx)("th",{className:"text-center py-2 px-3 font-medium text-gray-900",children:e.name.split(" ")[0]},e.id))]})}),(0,a.jsx)("tbody",{children:t.map(e=>(0,a.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,a.jsx)("td",{className:"py-2 px-3 font-medium",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:e.color}}),e.name.split(" ")[0]]})}),t.map(t=>{if(e.id===t.id)return(0,a.jsx)("td",{className:"text-center py-2 px-3 text-gray-400",children:"-"},t.id);let s=(t.coordinates[0]-e.coordinates[0])*Math.PI/180,r=(t.coordinates[1]-e.coordinates[1])*Math.PI/180,l=Math.sin(s/2)*Math.sin(s/2)+Math.cos(e.coordinates[0]*Math.PI/180)*Math.cos(t.coordinates[0]*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return(0,a.jsxs)("td",{className:"text-center py-2 px-3",children:[(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))*6371).toFixed(1)," km"]},t.id)})]},e.id))})]})})]})]})]}),(0,a.jsx)("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Comparando ",t.length," proyecto",1!==t.length?"s":""]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{onClick:s,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cerrar"}),(0,a.jsx)("button",{className:"px-4 py-2 bg-lime-600 text-white rounded-lg hover:bg-lime-700 transition-colors",children:"Exportar Comparaci\xf3n"})]})]})})]})})},c=s(5526);let n=(0,l.default)(()=>Promise.all([s.e(366),s.e(212),s.e(29),s.e(933),s.e(191)]).then(s.bind(s,7191)),{loadableGenerated:{webpack:()=>[7191]},ssr:!1});var o=()=>{let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(!0),[o,d]=(0,r.useState)({viewMode:"map",layers:{projects:!0,clusters:!0,heatmap:!1,municipalities:!1,roads:!1,population:!1}}),[m,x]=(0,r.useState)(null),[u,h]=(0,r.useState)(!1),[g,p]=(0,r.useState)([]),[f,j]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{(async()=>{try{let e=await c.k.getProjects();t(e)}catch(e){console.error("Error fetching projects:",e)}finally{l(!1)}})()},[]),(0,a.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,a.jsxs)("div",{className:"w-80 bg-white p-6 overflow-y-auto shadow-lg",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Filtros"}),(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("h3",{className:"font-semibold mb-4",children:"Capas del Mapa"}),Object.keys(o.layers).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("label",{htmlFor:e,children:e.charAt(0).toUpperCase()+e.slice(1)}),(0,a.jsx)("input",{type:"checkbox",id:e,checked:o.layers[e],onChange:t=>d({...o,layers:{...o.layers,[e]:t.target.checked}})})]},e))]}),(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("h3",{className:"font-semibold mb-4",children:"Modo de Vista"}),(0,a.jsxs)("select",{value:o.viewMode,onChange:e=>d({...o,viewMode:e.target.value}),className:"w-full p-2 border rounded",children:[(0,a.jsx)("option",{value:"map",children:"Mapa"}),(0,a.jsx)("option",{value:"satellite",children:"Sat\xe9lite"}),(0,a.jsx)("option",{value:"hybrid",children:"H\xedbrido"})]})]}),(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("button",{onClick:()=>h(!u),className:"w-full p-2 rounded ".concat(u?"bg-blue-500 text-white":"bg-gray-200"),children:u?"Salir del Modo Comparaci\xf3n":"Activar Modo Comparaci\xf3n"}),u&&(0,a.jsxs)("button",{onClick:()=>{g.length>1&&j(!0)},className:"w-full p-2 mt-4 bg-green-500 text-white rounded",disabled:g.length<2,children:["Comparar (",g.length,")"]})]})]}),(0,a.jsx)("div",{className:"flex-1 h-full",children:s?(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsxs)("svg",{className:"animate-spin h-12 w-12 text-lime-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):(0,a.jsx)(n,{projects:e.map(e=>({...e,coordinates:e.coordinates?[e.coordinates.y,e.coordinates.x]:void 0,score:e.mcda_score,assetClass:e.asset_class,address:e.location,color:"#84cc16",units:e.units_count,floors:e.floors_count,area:e.area_total,budget:e.budget})),filters:o,onProjectSelect:e=>{x(e)},compareMode:u,onAddToComparison:e=>{g.length<3&&!g.find(t=>t.id===e.id)&&p([...g,e])},selectedForComparison:g})}),f&&(0,a.jsx)(i,{projects:g,onClose:()=>j(!1),onRemoveProject:e=>{p(g.filter(t=>t.id!==e))}})]})}},5526:function(e,t,s){"use strict";s.d(t,{k:function(){return l}});let a=(0,s(6580).eI)("https://iemhwwufuffbwgrzusjt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImllbWh3d3VmdWZmYndncnp1c2p0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExMjYxMzEsImV4cCI6MjA2NjcwMjEzMX0.bhG23WjRqUE7AS18n-wYKJ1_Hx-_cuDJu8okON1e5cs"),r=e=>{if(e){if("string"==typeof e){let t=e.match(/\(([^,]+),([^)]+)\)/);if(t){let e=parseFloat(t[1]),s=parseFloat(t[2]);if(!isNaN(e)&&!isNaN(s))return{x:e,y:s}}}else if("object"==typeof e&&null!==e&&"number"==typeof e.x&&"number"==typeof e.y)return{x:e.x,y:e.y}}};class l{static async getProjects(){let{data:e,error:t}=await a.from("projects").select("*").order("created_at",{ascending:!1});if(t)throw t;return e.map(e=>({...e,coordinates:r(e.coordinates)}))}static async getProject(e){let{data:t,error:s}=await a.from("projects").select("*, mcda_evaluations(*, mcda_parameters(*)), business_model_canvas(*)").eq("id",e).single();if(s)throw s;return{...t,coordinates:r(t.coordinates)}}static async createProject(e){let{data:t,error:s}=await a.from("projects").insert(e).select().single();if(s)throw s;return t}static async updateProject(e,t){let{data:s,error:r}=await a.from("projects").update(t).eq("id",e).select().single();if(r)throw r;return s}static async deleteProject(e){let{error:t}=await a.from("projects").delete().eq("id",e);if(t)throw t}static async getMCDAParameters(){let{data:e,error:t}=await a.from("mcda_parameters").select("*").eq("is_active",!0).order("category",{ascending:!0}).order("name",{ascending:!0});if(t)throw t;return e}static async getMCDAParametersByCategory(){let{data:e,error:t}=await a.rpc("get_mcda_parameters_by_category");if(t)throw t;return e}static async getProjectEvaluations(e){let{data:t,error:s}=await a.rpc("get_project_evaluations",{project_uuid:e});if(s)throw s;return t}static async upsertMCDAEvaluation(e){let{data:t,error:s}=await a.rpc("upsert_mcda_evaluation",{p_project_id:e.project_id,p_parameter_id:e.parameter_id,p_value:e.value,p_notes:e.notes});if(s)throw s;return t}static async calculateMCDAScore(e){let{data:t,error:s}=await a.rpc("calculate_mcda_score",{project_uuid:e});if(s)throw s;return t}static async getBMC(e){let{data:t,error:s}=await a.from("business_model_canvas").select("*").eq("project_id",e).single();if(s&&"PGRST116"!==s.code)throw s;return t}static async upsertBMC(e){let{data:t,error:s}=await a.from("business_model_canvas").upsert(e).select().single();if(s)throw s;return t}static async getBMCTemplates(){let{data:e,error:t}=await a.from("bmc_templates").select("*");if(t)throw t;return e}static async getMunicipalities(){let{data:e,error:t}=await a.from("municipalities").select("*").order("name",{ascending:!0});if(t)throw t;return e}static async searchProjects(e,t,s){let{data:r,error:l}=await a.rpc("search_projects",{search_term:e,status_filter:t,asset_class_filter:s});if(l)throw l;return r}static async getUserProfile(e){let{data:t,error:s}=await a.from("user_profiles").select("*").eq("id",e).single();if(s&&"PGRST116"!==s.code)throw s;return t}static async updateUserProfile(e,t){let{data:s,error:r}=await a.from("user_profiles").upsert({id:e,...t}).select().single();if(r)throw r;return s}}}},function(e){e.O(0,[580,971,117,744],function(){return e(e.s=8406)}),_N_E=e.O()}]);